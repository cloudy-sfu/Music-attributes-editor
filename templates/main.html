<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Music attributes editor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>
    <script src="/static/fs_initialize.js"></script>
</head>
<body class="container-md">
<div class="row alert">
    <div class="col-md-12">
        <h1>Music Attributes Editor</h1>
    </div>
</div>
<div class="row alert">
    <div class="col-md-12">
        <p>Select the folder of album.</p>
        <div id="album" class="my-4"></div>
        <script>bind_fs('/fs?container_id=album');</script>
        <button class="btn btn-primary" onclick="load_album()">Load</button>
        <div id="album-area" class="my-4"></div>
        <ul id="modify-meta-result" class="my-4"></ul>
    </div>
</div>
<script>
    const album_area = document.getElementById('album-area');
    const modify_result = document.getElementById('modify-meta-result');
    async function load_album() {
        const response = await fetch("/view_album", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({
                "album_path": get_path_fs("album")
            }),
        });
        if (response.ok) {
            album_area.innerHTML = await response.text();
        }
    }
    async function modify_meta () {
        const form = document.getElementById('modify-meta');
        const form_data = new FormData(form);
        const response = await fetch('/modify_meta', {
            method: 'POST',
            body: form_data,
        });
        if (response.ok) {
            modify_result.innerHTML = await response.text();
        }
    }
</script>
</body>
</html>
